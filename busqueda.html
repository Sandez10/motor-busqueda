<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registros.</title>
    <link rel="stylesheet" href="formulario.css"> 
</head>
<body>
    <h1>ThunderBiker</h1>
    
    <div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="Buscar por nombre o grupo..." autofocus>
    </div>
    
    <div class="results-container">
        <div id="resultsList"></div>
        <div class="pagination" id="pagination"></div>
    </div>
    
    <!-- Modal de detalles -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Detalles</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // Datos de ejemplo
        const personas = [
            {id: 1, nombre: 'María García', grupo: 'Ventas', email: 'maria@ejemplo.com', telefono: '555-1001', cargo: 'Ejecutiva de Ventas'},
            {id: 2, nombre: 'Juan Pérez', grupo: 'TI', email: 'juan@ejemplo.com', telefono: '555-1002', cargo: 'Desarrollador Senior'},
            {id: 3, nombre: 'Ana López', grupo: 'Marketing', email: 'ana@ejemplo.com', telefono: '555-1003', cargo: 'Directora de Marketing'},
            {id: 4, nombre: 'Carlos Sánchez', grupo: 'Ventas', email: 'carlos@ejemplo.com', telefono: '555-1004', cargo: 'Gerente de Ventas'},
            {id: 5, nombre: 'Luisa Fernández', grupo: 'RH', email: 'luisa@ejemplo.com', telefono: '555-1005', cargo: 'Recursos Humanos'},
            {id: 6, nombre: 'Pedro Martínez', grupo: 'TI', email: 'pedro@ejemplo.com', telefono: '555-1006', cargo: 'Desarrollador Frontend'},
            {id: 7, nombre: 'Sofía Ramírez', grupo: 'Marketing', email: 'sofia@ejemplo.com', telefono: '555-1007', cargo: 'Especialista en SEO'},
            {id: 8, nombre: 'Diego González', grupo: 'Ventas', email: 'diego@ejemplo.com', telefono: '555-1008', cargo: 'Asesor Comercial'},
            {id: 9, nombre: 'Elena Castro', grupo: 'Administración', email: 'elena@ejemplo.com', telefono: '555-1009', cargo: 'Asistente Administrativa'},
            {id: 10, nombre: 'Jorge Ruiz', grupo: 'TI', email: 'jorge@ejemplo.com', telefono: '555-1010', cargo: 'Desarrollador Backend'},
            {id: 11, nombre: 'Laura Mendoza', grupo: 'Ventas', email: 'laura@ejemplo.com', telefono: '555-1011', cargo: 'Ejecutiva de Cuentas'},
            {id: 12, nombre: 'Ricardo Vargas', grupo: 'TI', email: 'ricardo@ejemplo.com', telefono: '555-1012', cargo: 'Arquitecto de Software'},
            {id: 13, nombre: 'Patricia Silva', grupo: 'Marketing', email: 'patricia@ejemplo.com', telefono: '555-1013', cargo: 'Directora de Contenidos'},
            {id: 14, nombre: 'Fernando Rojas', grupo: 'Ventas', email: 'fernando@ejemplo.com', telefono: '555-1014', cargo: 'Gerente Regional'},
            {id: 15, nombre: 'Gabriela Torres', grupo: 'RH', email: 'gabriela@ejemplo.com', telefono: '555-1015', cargo: 'Reclutadora'}
        ];

        // Configuración
        const resultadosPorPagina = 5;
        let paginaActual = 1;
        let terminoBusqueda = '';
        let resultadosFiltrados = [];

        // Elementos del DOM
        const searchInput = document.getElementById('searchInput');
        const resultsList = document.getElementById('resultsList');
        const pagination = document.getElementById('pagination');
        const detailModal = document.getElementById('detailModal');
        const modalBody = document.getElementById('modalBody');
        const closeModal = document.getElementById('closeModal');

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            buscar();
            
            // Eventos
            searchInput.addEventListener('input', () => {
                terminoBusqueda = searchInput.value.trim();
                paginaActual = 1;
                buscar();
            });
            
            closeModal.addEventListener('click', cerrarModal);
            
            // Cerrar modal con tecla ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    cerrarModal();
                }
            });
            
            // Cerrar modal haciendo clic fuera
            detailModal.addEventListener('click', (e) => {
                if (e.target === detailModal) {
                    cerrarModal();
                }
            });
        });

        // Función de búsqueda
        function buscar() {
            if (terminoBusqueda) {
                resultadosFiltrados = personas.filter(persona => 
                    persona.nombre.toLowerCase().includes(terminoBusqueda.toLowerCase()) || 
                    persona.grupo.toLowerCase().includes(terminoBusqueda.toLowerCase())
                );
            } else {
                resultadosFiltrados = [...personas];
            }
            
            mostrarResultados();
        }

        // Mostrar resultados
        function mostrarResultados() {
            const inicio = (paginaActual - 1) * resultadosPorPagina;
            const fin = inicio + resultadosPorPagina;
            const resultadosPagina = resultadosFiltrados.slice(inicio, fin);
            const totalPaginas = Math.ceil(resultadosFiltrados.length / resultadosPorPagina);
            
            // Mostrar lista de resultados
            if (resultadosPagina.length > 0) {
                let html = '';
                resultadosPagina.forEach(persona => {
                    html += `
                        <div class="result-item" data-id="${persona.id}">
                            <div class="result-name">${persona.nombre}</div>
                            <div class="result-group">${persona.grupo}</div>
                            <div class="result-contact">${persona.email}</div>
                        </div>
                    `;
                });
                resultsList.innerHTML = html;
                
                // Agregar eventos a los items
                document.querySelectorAll('.result-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const id = parseInt(item.getAttribute('data-id'));
                        mostrarDetalles(id);
                    });
                });
            } else {
                resultsList.innerHTML = '<div class="no-results">No se encontraron resultados</div>';
            }
            
            // Mostrar paginación
            mostrarPaginacion(totalPaginas);
        }

        // Mostrar paginación
        function mostrarPaginacion(totalPaginas) {
            if (totalPaginas <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let html = '';
            const paginasAMostrar = 5;
            let inicio = Math.max(1, paginaActual - Math.floor(paginasAMostrar / 2));
            let fin = Math.min(totalPaginas, inicio + paginasAMostrar - 1);
            
            // Ajustar si estamos cerca del inicio o final
            if (fin - inicio < paginasAMostrar - 1) {
                inicio = Math.max(1, fin - paginasAMostrar + 1);
            }
            
            // Botón Anterior
            if (paginaActual > 1) {
                html += `<button class="page-btn" onclick="cambiarPagina(${paginaActual - 1})">Anterior</button>`;
            } else {
                html += `<button class="page-btn disabled">Anterior</button>`;
            }
            
            // Primera página
            if (inicio > 1) {
                html += `<button class="page-btn" onclick="cambiarPagina(1)">1</button>`;
                if (inicio > 2) {
                    html += `<span class="page-btn disabled">...</span>`;
                }
            }
            
            // Páginas intermedias
            for (let i = inicio; i <= fin; i++) {
                html += `<button class="page-btn ${i === paginaActual ? 'active' : ''}" onclick="cambiarPagina(${i})">${i}</button>`;
            }
            
            // Última página
            if (fin < totalPaginas) {
                if (fin < totalPaginas - 1) {
                    html += `<span class="page-btn disabled">...</span>`;
                }
                html += `<button class="page-btn" onclick="cambiarPagina(${totalPaginas})">${totalPaginas}</button>`;
            }
            
            // Botón Siguiente
            if (paginaActual < totalPaginas) {
                html += `<button class="page-btn" onclick="cambiarPagina(${paginaActual + 1})">Siguiente</button>`;
            } else {
                html += `<button class="page-btn disabled">Siguiente</button>`;
            }
            
            pagination.innerHTML = html;
        }

        // Cambiar de página
        function cambiarPagina(pagina) {
            paginaActual = pagina;
            mostrarResultados();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // Mostrar detalles en modal
        function mostrarDetalles(id) {
            const persona = personas.find(p => p.id === id);
            if (persona) {
                modalBody.innerHTML = `
                    <div class="detail-row">
                        <div class="detail-label">Nombre:</div>
                        <div class="detail-value">${persona.nombre}</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Grupo:</div>
                        <div class="detail-value">${persona.grupo}</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Cargo:</div>
                        <div class="detail-value">${persona.cargo}</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Email:</div>
                        <div class="detail-value">
                            <a href="mailto:${persona.email}">${persona.email}</a>
                        </div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Teléfono:</div>
                        <div class="detail-value">
                            <a href="tel:${persona.telefono.replace(/-/g, '')}">${persona.telefono}</a>
                        </div>
                    </div>
                `;
                detailModal.classList.add('show');
                document.body.style.overflow = 'hidden';
            }
        }

        // Cerrar modal
        function cerrarModal() {
            detailModal.classList.remove('show');
            document.body.style.overflow = 'auto';
        }
    </script>
</body>
</html>